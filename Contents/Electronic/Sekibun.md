---
layout: default
title: ":bulb: 電気、電子回路"
description: ":pen: 積分回路について"
date: "2020/05/17"
lastmod: "2020/05/17"
---

## 0. はじめに

スイッチやセンサーなどの入力はスイッチを押してもすぐにONになる訳ではなく、  
ONとOFFを繰り返しながら安定してONレベルとなる。  
これを、チャタリングと言うがこれを考慮しないとONになってもすぐOFFを判定して  
しまい、意図した動作とはならない。  
そこでプログラム側で数十ミリ後などにもう一度チェックしてそれでもONならONと  
する様なプログラムにしないといけない。  
しかし、並列処理を扱えないマイコンなどではその間処理を止める事となる。  
よって、ハード側で滑らかな波形を作りON/OFFを繰り返さない波形にする必要がある。  
その１つの手段として抵抗とコンデンサで積分回路を作る必要がある。  
この抵抗やコンデンサの容量を決めるための充放電にかかる時間の計算をメモする。  
また、これはPICマイコンの入力用に使う想定としている。  

<br />

## 1. コンデンサの充電にかかる時間

### 1-1. 時定数を求める

抵抗(R):10kΩ = 10000Ω  
静電容量(C):10μF = 0.00001F  
時定数(CR):10000Ω × 0.00001F = 0.1s(秒)  

<br />

## 1-2. 一定時間後のコンデンサの両端にかかる電圧

公式：`Vo=V(1-e(-t/CR)`  
eは、自然対数の底で2.71828・・・  

例：DC5Vで1-1.の10kΩの抵抗と10μFの電解コンデンサを使用したの場合の例  
※時定数CRは1-1.で計算されている0.1(秒)を使用する  

5ミリ秒の電圧：5 × (1 - 0.9512) = 0.244V  
10ミリ秒の電圧：5 × (1 - 0.9048) = 0.476V
15ミリ秒の電圧：5 × (1 - 0.8607) = 0.6965V
※PICマイコンは0.8Vを超えるとONとみなすので18ミリ秒弱でONとなる
18ミリ秒：5 × (1 - 0.8352) = 0.824V
20ミリ秒：5 × (1 - 0.8187) = 0.9065V
100ミリ秒：0.1秒でコンデンサに貯まるのでそれ以上は充電しない  

※電源投入時やスイッチをON→OFF(PICはスイッチのOFFでPICはONとするのが良い)  
にした時18ミリ秒弱でON(HIGH)レベルとなる　　

<br />

## 2. コンデンサの放電にかかる時間

## 2-1. 時定数を求める

抵抗(R)：180Ω  
静電容量(C)：10μF = 0.00001F  
時定数(CR)：180Ω × 0.00001F = 0.0018s(秒)  

例：DC5Vで2-1.の180Ωの抵抗と10μFの電解コンデンサを使用したの場合の例  
※時定数CRは2-1.で計算されている0.0018(秒)を使用する  

0ミリ秒後の電圧：5 × (1.0000) = 5.0000V(5V)  
1ミリ秒後の電圧：5 × (0.9982) = 4.9910V  
5ミリ秒後の電圧：5 × (0.0621) = 0.3105V  
6ミリ秒後の電圧：5 × (0.0356) = 0.1780V  
※PICマイコンは0.15Vを下回るとOFFとみなすので6ミリ強でOFFとなる  
7ミリ秒後の電圧：5 × (0.0204) = 0.1020V  

※スイッチをOFF→ON(PICはスイッチのOFFでPICはONとするのが良い)  
にした時6ミリ強でOFF(LOW)レベルとなる　

180Ω→100Ωなら3.6ミリ秒前後となる  

* * *
